<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="../template.xhtml">

	<ui:define name="content">
		<div style="text-align: right">
			<h:link outcome="aggiungiNuovoVolo" class="btn btn-default"
				value="Aggiungi nuovo volo" />
			&nbsp;
			<h:link outcome="aggiungiVoloEsistente" class="btn btn-default"
				value="Aggiungi volo esistente" />
		</div>
		<br />

		<div style="margin-bottom: 20px;">
			<h:form>

				<p:dataTable id="dataTableAndata" var="volo"
					value="#{pacchettoBean.pacchetto.voliAndata}">
					<f:facet name="header">  
            		Elenco Voli Andata
        		</f:facet>


					<p:column sortBy="nomeCompagnia" headerText="Compagnia aerea">
						<h:outputText value="#{volo.nomeCompagnia}" />
					</p:column>

					<p:column sortBy="cittaPartenza" headerText="Città di partenza">
						<h:outputText value="#{volo.cittaPartenza}" />
					</p:column>

					<p:column sortBy="cittaArrivo" headerText="Città di arrivo">
						<h:outputText value="#{volo.cittaArrivo}" />
					</p:column>

					<p:column sortBy="partenza" headerText="Data di Partenza">
						<h:outputText value="#{volo.partenza}">
							<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column sortBy="arrivo" headerText="Data di arrivo">
						<h:outputText value="#{volo.arrivo}">
							<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column sortBy="disponibilita" headerText="Posti disponibili">
						<h:outputText value="#{volo.disponibilita}" />


					</p:column>

					<p:column sortBy="costo" headerText="Prezzo">
						<h:outputText value="#{volo.costo} €" />
					</p:column>

					<p:column>
						<h:commandLink id="eliminaAndata" value="Elimina"
							class="btn btn-danger white"
							action="#{pacchettoBean.eliminaVoloAndata(volo)}">
							<f:ajax execute="eliminaAndata" render="dataTableAndata" />
						</h:commandLink>
					</p:column>


				</p:dataTable>

			</h:form>
		</div>

		<div style="margin-botton: 15px;">
			<h:form>


				<p:dataTable id="dataTableRitorno" var="volo"
					value="#{pacchettoBean.pacchetto.voliRitorno}">
					<f:facet name="header">  
            		Elenco Voli Ritorno
        		</f:facet>


					<p:column sortBy="nomeCompagnia" headerText="Compagnia aerea">
						<h:outputText value="#{volo.nomeCompagnia}" />
					</p:column>

					<p:column sortBy="cittaPartenza" headerText="Città di partenza">
						<h:outputText value="#{volo.cittaPartenza}" />
					</p:column>

					<p:column sortBy="cittaArrivo" headerText="Città di arrivo">
						<h:outputText value="#{volo.cittaArrivo}" />
					</p:column>

					<p:column sortBy="partenza" headerText="Data di Partenza">
						<h:outputText value="#{volo.partenza}">
							<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column sortBy="arrivo" headerText="Data di arrivo">
						<h:outputText value="#{volo.arrivo}">
							<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column sortBy="disponibilita" headerText="Posti disponibili">
						<h:outputText value="#{volo.disponibilita}" />


					</p:column>

					<p:column sortBy="costo" headerText="Prezzo">
						<h:outputText value="#{volo.costo} €" />
					</p:column>

					<p:column>
						<h:commandLink id="eliminaRitorno" value="Elimina"
							class="btn btn-danger white"
							action="#{pacchettoBean.eliminaVoloRitorno(volo)}">
							<f:ajax execute="eliminaRitorno" render="dataTableRitorno" />
						</h:commandLink>

					</p:column>


				</p:dataTable>

			</h:form>

		</div>


		<div style="margin-top: 20px; text-align: right;">
		<h:form>
			<h:link outcome="aggiungiInfoGenerali" class="btn btn-default"
				value="Indietro" />
			
			<h:commandLink action="#{pacchettoBean.checkConsistenzaVoli()}" class="btn btn-primary"
				value="Avanti" />
			</h:form>
		</div>
		<script>
			jQuery.noConflict();
			$(function() {
				$('.active').removeClass('active');
				$('.nav li:nth-child(4)').addClass('active');
			});
		</script>
	</ui:define>

</ui:composition>


</html>